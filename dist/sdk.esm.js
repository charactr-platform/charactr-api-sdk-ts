var e={735:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0,t.config={charactrAPIUrl:"https://api.charactr.com"},Object.freeze(t.config)},974:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TTS=void 0;const i=r(735),o=r(618),a=r(117);t.TTS=class{config;constructor(e){this.config=e}async getVoices(){const e=await fetch(`${i.config.charactrAPIUrl}/v1/tts/voices`,{method:"GET",headers:(0,o.getHeaders)(this.config)});if(!e.ok)throw await(0,o.parseAPIError)(e);return e.json()}async convert(e,t){(0,a.validateTTSTextOrThrow)(t);const r=(0,a.getValidVoiceIdOrThrow)(e),n=await fetch(`${i.config.charactrAPIUrl}/v1/tts/convert`,{method:"POST",headers:(0,o.getHeaders)(this.config),body:JSON.stringify({voiceId:r,text:t})});if(!n.ok)throw await(0,o.parseAPIError)(n);const c=n.headers.get("Content-Type");return{audio:new Blob([await n.arrayBuffer()],{type:c}),durationMs:Number(n.headers.get("Audio-Duration-Ms")),sizeBytes:Number(n.headers.get("Audio-Size-Bytes")),type:c}}}},618:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.parseAPIError=t.getHeaders=void 0,t.getHeaders=function(e){return{"Content-Type":"application/json","X-Client-Key":e.ClientKey,"X-Api-Key":e.APIKey}},t.parseAPIError=async function(e){try{const t=await e.json();return new Error(`${t?.text} (${t?.code}): ${t?.message}`)}catch(t){return new Error(`${e.status}: ${e.statusText}`)}}},117:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.validateAudioInputOrThrow=t.validateTTSTextOrThrow=t.getValidVoiceIdOrThrow=void 0,t.getValidVoiceIdOrThrow=function(e){if(Number.isInteger(e)&&Number(e)>0)return Number(e);if(Number.isInteger(e.id))return e.id;throw new TypeError("Invalid 'voice' argument: must be either a valid integer or a Voice object.")},t.validateTTSTextOrThrow=function(e){if("string"!=typeof e)throw new TypeError("Invalid 'text' argument: must be a string.");if(e.length<1)throw new TypeError("Invalid 'text' argument: must be at least 1 character long.")},t.validateAudioInputOrThrow=function(e){if("audio/wav"!==e.type)throw new Error("Invalid audio type. Expected wav")}},526:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.VC=void 0;const i=r(735),o=r(618),a=r(117);t.VC=class{config;constructor(e){this.config=e}async getVoices(){const e=await fetch(`${i.config.charactrAPIUrl}/v1/vc/voices`,{method:"GET",headers:(0,o.getHeaders)(this.config)});if(!e.ok)throw await(0,o.parseAPIError)(e);return e.json()}async convert(e,t){(0,a.validateAudioInputOrThrow)(t);const r=(0,a.getValidVoiceIdOrThrow)(e),n=new FormData;n.append("file",t);const c=(0,o.getHeaders)(this.config);delete c["Content-Type"];const s=await fetch(`${i.config.charactrAPIUrl}/v1/vc/convert?voiceId=${r}`,{method:"POST",headers:c,body:n});if(!s.ok)throw await(0,o.parseAPIError)(s);const d=s.headers.get("Content-Type");return{audio:new Blob([await s.arrayBuffer()],{type:d}),durationMs:Number(s.headers.get("Audio-Duration-Ms")),sizeBytes:Number(s.headers.get("Audio-Size-Bytes")),type:d}}}}},t={};function r(i){var o=t[i];if(void 0!==o)return o.exports;var a=t[i]={exports:{}};return e[i](a,a.exports,r),a.exports}var i={};(()=>{var e=i;Object.defineProperty(e,"X",{value:!0}),e.p=void 0;const t=r(974),o=r(526),a=r(735),n=r(618);e.p=class{config;initialized=!1;tts;vc;constructor(e){return this.config=e,new Proxy(this,{get:function(e,t){const r=Reflect.get(e,t);if(!r&&!["init","initialized","checkAuth"].includes(String(t)))throw new Error("CharactrAPI is not initialized. Call the init() function first.");return r}})}async init(){await this.checkAuth(),this.tts=new t.TTS(this.config),this.vc=new o.VC(this.config),this.initialized=!0}async checkAuth(){const e=await fetch(`${a.config.charactrAPIUrl}/v1/auth/check`,{method:"POST",headers:(0,n.getHeaders)(this.config)});if(!e.ok){if(401===e.status)throw new Error("Could not authenticate in the API. Make sure you have provided correct credentials.");throw await(0,n.parseAPIError)(e)}}}})();var o=i.p,a=i.X;export{o as CharactrAPISDK,a as __esModule};