var e={300:(e,t,r)=>{var o=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==r.g)return r.g;throw new Error("unable to locate global object")}();e.exports=t=o.fetch,o.fetch&&(t.default=o.fetch.bind(o)),t.Headers=o.Headers,t.Request=o.Request,t.Response=o.Response},735:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0,t.config={charactrAPIUrl:"http://localhost:8015"},Object.freeze(t.config)},974:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TTS=void 0;const o=r(735),i=r(618),n=r(117),a=r(300);t.TTS=class{config;constructor(e){this.config=e}async getVoices(){const e=await a(`${o.config.charactrAPIUrl}/v1/tts/voices`,{method:"GET",headers:(0,i.getHeaders)(this.config)});if(!e.ok)throw await(0,i.parseAPIError)(e);return e.json()}async convert(e,t){(0,n.validateTTSTextOrThrow)(t);const r=(0,n.getValidVoiceIdOrThrow)(e),s=await a(`${o.config.charactrAPIUrl}/v1/tts/convert`,{method:"POST",headers:(0,i.getHeaders)(this.config),body:JSON.stringify({voiceId:r,text:t})});if(!s.ok)throw await(0,i.parseAPIError)(s);const c=s.headers.get("Content-Type");return{audio:new Blob([await s.arrayBuffer()],{type:c}),durationMs:Number(s.headers.get("Audio-Duration-Ms")),sizeBytes:Number(s.headers.get("Audio-Size-Bytes")),type:c}}}},618:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.parseAPIError=t.getHeaders=void 0,t.getHeaders=function(e){return{"Content-Type":"application/json","X-Client-Key":e.ClientKey,"X-Api-Key":e.APIKey}},t.parseAPIError=async function(e){try{const t=await e.json();return new Error(`${t?.text} (${t?.code}): ${t?.message}`)}catch(t){return new Error(`${e.status}: ${e.statusText}`)}}},117:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.validateTTSTextOrThrow=t.getValidVoiceIdOrThrow=void 0,t.getValidVoiceIdOrThrow=function(e){if(Number.isInteger(e)&&Number(e)>0)return Number(e);if(Number.isInteger(e.id))return e.id;throw new TypeError("Invalid 'voice' argument: must be either a valid integer or a Voice object.")},t.validateTTSTextOrThrow=function(e){if("string"!=typeof e)throw new TypeError("Invalid 'text' argument: must be a string.");if(e.length<1)throw new TypeError("Invalid 'text' argument: must be at least 1 character long.")}},526:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.VC=void 0;const o=r(735),i=r(618),n=r(117),a=r(300);t.VC=class{config;constructor(e){this.config=e}async getVoices(){const e=await a(`${o.config.charactrAPIUrl}/v1/vc/voices`,{method:"GET",headers:(0,i.getHeaders)(this.config)});if(!e.ok)throw await(0,i.parseAPIError)(e);return e.json()}async convert(e,t){const r=(0,n.getValidVoiceIdOrThrow)(e),s=new FormData;s.append("file",t);const c=(0,i.getHeaders)(this.config);delete c["Content-Type"];const d=await a(`${o.config.charactrAPIUrl}/v1/vc/convert?voiceId=${r}`,{method:"POST",headers:c,body:s});if(!d.ok)throw await(0,i.parseAPIError)(d);const u=d.headers.get("Content-Type");return{audio:new Blob([await d.arrayBuffer()],{type:u}),durationMs:Number(d.headers.get("Audio-Duration-Ms")),sizeBytes:Number(d.headers.get("Audio-Size-Bytes")),type:u}}}}},t={};function r(o){var i=t[o];if(void 0!==i)return i.exports;var n=t[o]={exports:{}};return e[o](n,n.exports,r),n.exports}r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}();var o={};(()=>{var e=o;Object.defineProperty(e,"X",{value:!0}),e.p=void 0;const t=r(974),i=r(526),n=r(735),a=r(618),s=r(300);e.p=class{config;initialized=!1;tts;vc;constructor(e){return this.config=e,new Proxy(this,{get:function(e,t){const r=Reflect.get(e,t);if(!r&&!["init","initialized","checkAuth"].includes(String(t)))throw new Error("CharactrAPI is not initialized. Call the init() function first.");return r}})}async init(){await this.checkAuth(),this.tts=new t.TTS(this.config),this.vc=new i.VC(this.config),this.initialized=!0}async checkAuth(){const e=await s(`${n.config.charactrAPIUrl}/v1/auth/check`,{method:"POST",headers:(0,a.getHeaders)(this.config)});if(!e.ok){if(401===e.status)throw new Error("Could not authenticate in the API. Make sure you have provided correct credentials.");throw await(0,a.parseAPIError)(e)}}}})();var i=o.p,n=o.X;export{i as CharactrAPISDK,n as __esModule};